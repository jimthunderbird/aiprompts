<div id="number-list"></div>
<script>
(() => {
  const container = document.getElementById('number-list');
  const componentId = 'number-list';
  let numbers = [];

  // Generate 20 random numbers
  for (let i = 0; i < 20; i++) {
    numbers.push(Math.floor(Math.random() * 500) + 1);
  }

  // Create paragraphs
  numbers.forEach((num, index) => {
    const p = document.createElement('p');
    p.className = 'number';
    p.textContent = num;
    p.draggable = true;
    p.setAttribute('data-index', index);
    container.appendChild(p);
  });

  let draggedElement = null;
  let startIndex = null;

  container.addEventListener('dragstart', (e) => {
    if (e.target.classList.contains('number')) {
      draggedElement = e.target;
      startIndex = parseInt(draggedElement.getAttribute('data-index'));
      e.dataTransfer.effectAllowed = 'move';
    }
  });

  container.addEventListener('dragenter', (e) => {
    e.preventDefault();
    if (e.target.classList.contains('number') && e.target !== draggedElement) {
      const targetIndex = parseInt(e.target.getAttribute('data-index'));
      const draggedIndex = parseInt(draggedElement.getAttribute('data-index'));

      // Swap elements in DOM
      if (draggedIndex < targetIndex) {
        container.insertBefore(e.target, draggedElement);
      } else {
        container.insertBefore(draggedElement, e.target);
      }

      // Update data-index attributes
      const paragraphs = container.querySelectorAll('.number');
      paragraphs.forEach((p, index) => {
        p.setAttribute('data-index', index);
      });

      // Emit event
      const event = new CustomEvent(`component_${componentId}_number_${draggedIndex}_dragging`, {
        detail: { from: draggedIndex, to: targetIndex }
      });
      document.dispatchEvent(event);
    }
  });
})();
</script>

