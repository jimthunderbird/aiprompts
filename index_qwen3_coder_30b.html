<div id="number-list"></div>
<script>
  (function() {
    const container = document.getElementById('number-list');
    const numbers = [];
    
    for (let i = 0; i < 5; i++) {
      const paragraph = document.createElement('p');
      paragraph.className = 'number';
      paragraph.textContent = Math.floor(Math.random() * 500) + 1;
      paragraph.setAttribute('draggable', 'true');
      paragraph.dataset.index = i;
      numbers.push(paragraph);
      container.appendChild(paragraph);
    }
    
    let draggedItem = null;
    
    container.addEventListener('dragstart', function(e) {
      if (e.target.classList.contains('number')) {
        draggedItem = e.target;
        e.target.classList.add('dragging');
        setTimeout(() => e.target.classList.add('semi-transparent'), 0);
      }
    });
    
    container.addEventListener('dragend', function(e) {
      if (e.target.classList.contains('number')) {
        e.target.classList.remove('dragging', 'semi-transparent');
        draggedItem = null;
      }
    });
    
    container.addEventListener('dragover', function(e) {
      e.preventDefault();
      if (draggedItem) {
        const target = e.target;
        if (target.classList.contains('number') && target !== draggedItem) {
          const rect = target.getBoundingClientRect();
          const middle = rect.top + rect.height / 2;
          
          if (e.clientY < middle) {
            container.insertBefore(draggedItem, target);
          } else {
            container.insertBefore(draggedItem, target.nextSibling);
          }
          
          const draggedIndex = Array.from(container.children).indexOf(draggedItem);
          const targetIndex = Array.from(container.children).indexOf(target);
          
          const event = new CustomEvent('component_number-list_number_' + draggedIndex + '_dragging', {
            detail: { 
              draggedIndex: draggedIndex,
              targetIndex: targetIndex
            }
          });
          
          container.dispatchEvent(event);
        }
      }
    });
  })();
</script>

