<div id="numbers-list-demo">
  <p id="status">number drag and drop status...</p>
  <div id="numbers-list"></div>
  <button id="control-button" class="control-button">click on me</button>
</div>
<script>
  const component = document.getElementById('numbers-list-demo');
  const status = component.querySelector('#status');
  const numbersList = component.querySelector('#numbers-list');
  const controlButton = component.querySelector('#control-button');
  let counter = 1;
  const numbers = Array.from({length:5}, () => Math.floor(Math.random()*1000)+1);
  let draggingEl = null;

  numbers.forEach((num, idx) => {
    const p = document.createElement('p');
    p.id = `p${idx+1}`;
    p.textContent = `this is ${num}`;
    p.className = 'number';
    if ((idx+1)%2===1) p.classList.add('odd'); else p.classList.add('even');
    p.draggable = true;

    p.addEventListener('dragstart', function() {
      status.textContent = `dragging number ${num}`;
      this.classList.add('dragging');
      draggingEl = this;
    });

    p.addEventListener('dragover', function(e) {
      e.preventDefault();
      if (draggingEl && draggingEl !== this) {
        const parent = this.parentNode;
        const placeholder = document.createElement('div');
        parent.replaceChild(placeholder, draggingEl);
        parent.replaceChild(draggingEl, this);
        parent.replaceChild(this, placeholder);
        parent.removeChild(placeholder);
      }
    });

    p.addEventListener('dragend', function() {
      status.textContent = `dropped number ${num}`;
      this.classList.remove('dragging');
      draggingEl = null;
    });

    p.addEventListener('mouseenter', function() {
      this.classList.add('hover');
    });

    p.addEventListener('mouseleave', function() {
      this.classList.remove('hover');
    });

    numbersList.appendChild(p);
  });

  component.addEventListener('click', function() {
    component.classList.add('click_inside');
  });

  document.addEventListener('click', function(e) {
    if (!component.contains(e.target)) {
      component.classList.remove('click_inside');
    }
  });

  controlButton.addEventListener('mousedown', function() {
    this.classList.add('click');
    alert(`you click on me ${counter} times`);
    counter += 2;
  });

  controlButton.addEventListener('mouseup', function() {
    this.classList.remove('click');
  });
</script>

