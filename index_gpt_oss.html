<div id="numbers-list-demo">
  <p id="status">number drag and drop status...</p>
  <div id="numbers-list"></div>
  <button id="control-button" class="control-button">click on me</button>
</div>
<script>
(() => {
  const container = document.getElementById('numbers-list-demo');
  const status = document.getElementById('status');
  const numbersList = document.getElementById('numbers-list');
  const controlButton = document.getElementById('control-button');

  let counter = 1;
  const numbers = Array.from({length: 5}, () => Math.floor(Math.random() * 1000) + 1);

  function renderNumbers() {
    numbersList.innerHTML = '';
    numbers.forEach((num, idx) => {
      const p = document.createElement('p');
      p.id = 'p' + (idx + 1);
      p.className = 'number' + ((idx + 1) % 2 === 1 ? ' odd' : ' even');
      p.textContent = `this is ${num}`;
      p.draggable = true;

      p.addEventListener('dragstart', e => {
        e.dataTransfer.setData('text/plain', p.id);
        status.textContent = `dragging number ${num}`;
        p.classList.add('dragging');
      });

      p.addEventListener('dragover', e => {
        e.preventDefault();
        const draggedId = e.dataTransfer.getData('text/plain');
        if (draggedId && draggedId !== p.id) {
          const draggedEl = document.getElementById(draggedId);
          numbersList.insertBefore(draggedEl, p);
        }
      });

      p.addEventListener('dragend', e => {
        status.textContent = `dropped number ${num}`;
        p.classList.remove('dragging');
      });

      p.addEventListener('mouseenter', () => p.classList.add('hover'));
      p.addEventListener('mouseleave', () => p.classList.remove('hover'));

      numbersList.appendChild(p);
    });
  }

  renderNumbers();

  controlButton.addEventListener('mousedown', e => {
    controlButton.classList.add('click');
    alert(`you click on me ${counter} times`);
    counter += 2;
  });

  controlButton.addEventListener('mouseup', e => {
    controlButton.classList.remove('click');
  });

  container.addEventListener('click', e => {
    container.classList.add('click_inside');
    e.stopPropagation();
  });

  document.addEventListener('click', e => {
    if (!container.contains(e.target)) {
      container.classList.remove('click_inside');
    }
  });
})();
</script>

