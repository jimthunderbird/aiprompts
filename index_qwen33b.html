<div id="numbers-list-demo">
  <p id="status">number drag and drop status...</p>
  <div id="numbers-list"></div>
  <button id="control-button">click on me</button>
</div>
<script>
  // Component data
  const componentData = {
    counter: 1,
    numbers: Array.from({ length: 5 }, () => Math.floor(Math.random() * 1000) + 1)
  };

  // DOM elements
  const container = document.getElementById('numbers-list-demo');
  const statusEl = document.getElementById('status');
  const numbersListEl = document.getElementById('numbers-list');
  const controlButtonEl = document.getElementById('control-button');

  // Helper to create number paragraphs
  function renderNumbers() {
    numbersListEl.innerHTML = '';
    componentData.numbers.forEach((num, index) => {
      const p = document.createElement('p');
      p.className = 'number';
      if ((index + 1) % 2 === 1) p.classList.add('odd');
      else p.classList.add('even');
      p.id = `p${index + 1}`;
      p.textContent = `this is ${num}`;
      p.draggable = true;

      // Drag events
      p.addEventListener('dragstart', function () {
        statusEl.textContent = `dragging number ${num}`;
        this.classList.add('dragging');
        componentData.draggingElement = this;
      });

      p.addEventListener('dragover', function (e) {
        e.preventDefault();
        if (componentData.draggingElement && this !== componentData.draggingElement) {
          const parent = this.parentElement;
          parent.insertBefore(this, componentData.draggingElement);
        }
      });

      p.addEventListener('dragend', function () {
        statusEl.textContent = `dropped number ${num}`;
        this.classList.remove('dragging');
        componentData.draggingElement = null;
      });

      p.addEventListener('mouseenter', function () {
        this.classList.add('hover');
      });

      p.addEventListener('mouseleave', function () {
        this.classList.remove('hover');
      });

      numbersListEl.appendChild(p);
    });
  }

  // Click outside logic
  document.addEventListener('click', function (e) {
    if (!container.contains(e.target)) {
      container.classList.remove('click_inside');
    }
  });

  // Click inside logic
  container.addEventListener('click', function (e) {
    container.classList.add('click_inside');
  });

  // Control button logic
  controlButtonEl.addEventListener('mousedown', function () {
    this.classList.add('click');
    alert(`you click on me ${componentData.counter} times`);
    componentData.counter += 2;
  });

  controlButtonEl.addEventListener('mouseup', function () {
    this.classList.remove('click');
  });

  // Initial render
  renderNumbers();
</script>

