<div id="number-list">
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
</div>

<script>
(function() {
  const component = document.getElementById('number-list');
  const paragraphs = component.querySelectorAll('.number');
  
  paragraphs.forEach(p => {
    p.textContent = Math.floor(Math.random() * 500) + 1;
  });
  
  let draggedElement = null;
  
  paragraphs.forEach(p => {
    p.addEventListener('dragstart', function(e) {
      draggedElement = this;
    });
    
    p.addEventListener('dragenter', function(e) {
      e.preventDefault();
      if (draggedElement && draggedElement !== this) {
        const parent = this.parentNode;
        const draggedIndex = Array.from(parent.children).indexOf(draggedElement);
        const targetIndex = Array.from(parent.children).indexOf(this);
        
        if (draggedIndex < targetIndex) {
          parent.insertBefore(draggedElement, this.nextSibling);
        } else {
          parent.insertBefore(draggedElement, this);
        }
        
        const event = new CustomEvent('component_number-list_number_dragging', {
          detail: { draggedElement, targetElement: this }
        });
        component.dispatchEvent(event);
      }
    });
    
    p.addEventListener('dragover', function(e) {
      e.preventDefault();
    });
    
    p.addEventListener('dragend', function(e) {
      draggedElement = null;
    });
  });
})();
</script>

