<div id="number-list">
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
  <p class="number" draggable="true"></p>
</div>

<script>
(function() {
  const container = document.getElementById('number-list');
  const paragraphs = container.querySelectorAll('.number');
  
  paragraphs.forEach((p, index) => {
    p.textContent = Math.floor(Math.random() * 500) + 1;
    p.dataset.index = index;
  });
  
  let draggedElement = null;
  
  paragraphs.forEach((p) => {
    p.addEventListener('dragstart', function(e) {
      draggedElement = this;
    });
    
    p.addEventListener('dragenter', function(e) {
      if (draggedElement && draggedElement !== this) {
        const draggedIndex = draggedElement.dataset.index;
        const event = new CustomEvent(`component_number-list_number_${draggedIndex}_dragging`, {
          detail: { draggedElement, targetElement: this }
        });
        document.dispatchEvent(event);
        
        const parent = this.parentNode;
        const allParagraphs = Array.from(parent.children);
        const draggedPos = allParagraphs.indexOf(draggedElement);
        const thisPos = allParagraphs.indexOf(this);
        
        if (draggedPos < thisPos) {
          parent.insertBefore(draggedElement, this.nextSibling);
        } else {
          parent.insertBefore(draggedElement, this);
        }
      }
    });
    
    p.addEventListener('dragover', function(e) {
      e.preventDefault();
    });
  });
})();
</script>

