<div id="number-list"></div>

<script>
(function() {
  const container = document.getElementById('number-list');
  
  function generateRandomNumber() {
    return Math.floor(Math.random() * 500) + 1;
  }
  
  function emitEvent(eventName) {
    const event = new CustomEvent(eventName);
    document.dispatchEvent(event);
  }
  
  for (let i = 0; i < 5; i++) {
    const p = document.createElement('p');
    p.className = 'number';
    p.textContent = generateRandomNumber();
    p.draggable = true;
    p.dataset.index = i;
    
    p.addEventListener('dragstart', function(e) {
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/html', this.innerHTML);
      this.classList.add('dragging-source');
      emitEvent(`number-list-number-${i}-dragging`);
    });
    
    p.addEventListener('dragenter', function(e) {
      e.preventDefault();
      const draggingElement = container.querySelector('.dragging-source');
      if (draggingElement && draggingElement !== this) {
        const allParagraphs = Array.from(container.querySelectorAll('.number'));
        const draggingIndex = allParagraphs.indexOf(draggingElement);
        const targetIndex = allParagraphs.indexOf(this);
        
        if (draggingIndex < targetIndex) {
          this.parentNode.insertBefore(draggingElement, this.nextSibling);
        } else {
          this.parentNode.insertBefore(draggingElement, this);
        }
      }
    });
    
    p.addEventListener('dragover', function(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
    });
    
    p.addEventListener('dragend', function(e) {
      this.classList.remove('dragging-source');
    });
    
    container.appendChild(p);
  }
})();
</script>

