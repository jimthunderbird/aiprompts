<div id="number-list">
  <div id="status">moving status</div>
</div>

<script>
(function() {
  const componentId = 'number-list';
  const container = document.getElementById(componentId);
  const statusDiv = document.getElementById('status');
  
  for (let i = 0; i < 8; i++) {
    const p = document.createElement('p');
    p.className = 'number';
    p.textContent = Math.floor(Math.random() * 1000) + 1;
    p.draggable = true;
    p.dataset.index = i;
    container.appendChild(p);
  }
  
  let draggedElement = null;
  let draggedIndex = null;
  
  container.addEventListener('dragstart', function(e) {
    if (e.target.classList.contains('number')) {
      draggedElement = e.target;
      draggedIndex = e.target.dataset.index;
      const event = new CustomEvent(`component_${componentId}_number_${draggedIndex}_drag_started`);
      document.dispatchEvent(event);
      statusDiv.textContent = 'drag started';
    }
  });
  
  container.addEventListener('dragover', function(e) {
    e.preventDefault();
    if (e.target.classList.contains('number') && draggedElement) {
      const targetIndex = e.target.dataset.index;
      const event = new CustomEvent(`component_${componentId}_number_${draggedIndex}_drag_ongoing`);
      document.dispatchEvent(event);
      
      if (draggedElement !== e.target && draggedElement.textContent !== e.target.textContent) {
        statusDiv.textContent = `${draggedElement.textContent} is over ${e.target.textContent}`;
        
        const allNumbers = Array.from(container.querySelectorAll('.number'));
        const draggedIdx = allNumbers.indexOf(draggedElement);
        const targetIdx = allNumbers.indexOf(e.target);
        
        if (draggedIdx < targetIdx) {
          e.target.parentNode.insertBefore(draggedElement, e.target.nextSibling);
        } else {
          e.target.parentNode.insertBefore(draggedElement, e.target);
        }
      }
    }
  });
  
  container.addEventListener('dragend', function(e) {
    if (e.target.classList.contains('number')) {
      const event = new CustomEvent(`component_${componentId}_number_${draggedIndex}_drag_ended`);
      document.dispatchEvent(event);
      statusDiv.textContent = 'drag ended';
      draggedElement = null;
      draggedIndex = null;
    }
  });
})();
</script>

