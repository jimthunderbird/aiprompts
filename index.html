<div id="question-popup">
  <p id="status">number drag and drop status...</p>
  <div id="numbers-list"></div>
  <button id="question-popup-inner-button">click on me</button>
</div>

<style>
  #question-popup {
    width: 400px;
    height: 300px;
    background: blue;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0;
    box-sizing: border-box;
    border: none;
    cursor: pointer;
  }

  #status {
    background: lightyellow;
    margin: 0;
    padding: 0 10px 10px;
    border: 1px solid silver;
    color: gold;
    text-align: center;
    font-weight: normal;
    font-size: 16px;
    width: 100%;
    box-sizing: border-box;
  }

  #numbers-list {
    display: flex;
    flex-direction: column;
    gap: 5px;
    margin-top: 10px;
    width: 100%;
    padding: 0;
    box-sizing: border-box;
  }

  .number-item {
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border: 1px solid silver;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-size: 16px;
  }

  .number-item.odd {
    background: red;
  }

  .number-item.even {
    background: lightred;
  }

  .number-item.dragging {
    border: 5px solid gold;
  }

  button#question-popup-inner-button {
    border: 5px solid gold;
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    background: transparent;
    color: black;
    font-weight: normal;
  }

  button#question-popup-inner-button:hover {
    background: #f0f0f0;
  }
</style>

<script>
  class QuestionPopupComponent {
    constructor() {
      this.counter = 1;
      this.numbers = Array.from({ length: 5 }, () => Math.floor(Math.random() * 1000) + 1);
      this.setupElements();
      this.bindEvents();
    }

    setupElements() {
      const numbersList = document.getElementById('numbers-list');
      numbersList.innerHTML = '';
      this.numbers.forEach((num, index) => {
        const p = document.createElement('p');
        p.id = `p${index + 1}`;
        p.className = `number-item ${index % 2 === 0 ? 'odd' : 'even'}`;
        p.textContent = `this is ${num}`;
        p.draggable = true;
        numbersList.appendChild(p);
      });
    }

    bindEvents() {
      const popup = document.getElementById('question-popup');
      const status = document.getElementById('status');
      const button = document.getElementById('question-popup-inner-button');

      // Click inside popup
      popup.addEventListener('click', (e) => {
        if (e.target === popup) {
          popup.style.background = 'green';
          status.style.fontWeight = 'bold';
        }
      });

      // Click outside popup
      document.addEventListener('click', (e) => {
        if (!popup.contains(e.target)) {
          popup.style.background = 'blue';
          status.style.fontWeight = 'normal';
        }
      });

      // Drag and drop
      const items = document.querySelectorAll('.number-item');
      items.forEach(item => {
        item.addEventListener('dragstart', (e) => {
          status.textContent = `dragging number ${item.textContent.split(' ')[2]}`;
          item.classList.add('dragging');
          e.dataTransfer.setData('text/plain', item.id);
        });

        item.addEventListener('dragover', (e) => {
          e.preventDefault();
          const draggingItem = document.querySelector('.dragging');
          const allItems = Array.from(document.querySelectorAll('.number-item'));
          const targetIndex = allItems.indexOf(item);
          const draggingIndex = allItems.indexOf(draggingItem);
          if (targetIndex !== draggingIndex) {
            const parent = item.parentElement;
            if (targetIndex < draggingIndex) {
              parent.insertBefore(draggingItem, item);
            } else {
              parent.insertBefore(draggingItem, item.nextSibling);
            }
          }
        });

        item.addEventListener('dragend', (e) => {
          const numberText = e.target.textContent;
          const number = numberText.split(' ')[2];
          status.textContent = `dropped number ${number}`;
          e.target.classList.remove('dragging');
        });

        item.addEventListener('mouseenter', () => {
          item.style.cursor = 'pointer';
        });

        item.addEventListener('mouseleave', () => {
          item.style.cursor = 'default';
        });

        item.addEventListener('click', () => {
          const index = item.id.replace('p', '');
          alert(`you click on paragraph ${index}`);
        });
      });

      // Button click
      button.addEventListener('click', () => {
        button.style.borderColor = 'black';
        button.style.fontWeight = 'bold';
        alert(`you click on me ${this.counter} times`);
        this.counter += 2;
      });
    }
  }

  // Initialize component
  document.addEventListener('DOMContentLoaded', () => {
    new QuestionPopupComponent();
  });
</script>

