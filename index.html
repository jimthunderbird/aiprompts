<div id="question-popup">
  <p id="status">number drag and drop status...</p>
  <div id="numbers-list"></div>
  <button id="question-popup-inner-button">click on me</button>
</div>

<style>
  #question-popup {
    width: 400px;
    height: 300px;
    background: blue;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  #status {
    background: lightyellow;
    margin: 0;
    border: 1px silver solid;
    padding: 0 10px 10px 10px;
    color: gold;
    text-align: center;
    font-weight: normal;
  }

  #numbers-list p {
    cursor: default;
  }

  #numbers-list p:nth-child(odd) {
    background: red;
  }

  #numbers-list p:nth-child(even) {
    background: lightcoral;
  }

  #numbers-list p.dragging {
    border: 5px gold solid;
  }

  #question-popup-inner-button {
    border: 5px gold solid;
  }
</style>

<script>
  (function() {
    let counter = 1;
    const numbers = Array.from({length: 5}, () => Math.floor(Math.random() * 1000) + 1);
    
    const popup = document.getElementById('question-popup');
    const status = document.getElementById('status');
    const numbersList = document.getElementById('numbers-list');
    const button = document.getElementById('question-popup-inner-button');
    
    // Populate numbers list
    numbers.forEach((number, index) => {
      const p = document.createElement('p');
      p.id = 'p' + (index + 1);
      p.textContent = 'this is ' + number;
      p.draggable = true;
      p.dataset.number = number;
      p.dataset.index = index + 1;
      
      p.addEventListener('dragstart', function(e) {
        status.textContent = 'dragging number ' + number;
        this.classList.add('dragging');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', this.innerHTML);
      });
      
      p.addEventListener('dragend', function() {
        this.classList.remove('dragging');
      });
      
      p.addEventListener('drop', function(e) {
        e.preventDefault();
        status.textContent = 'dropped number ' + this.dataset.number;
        const dragging = numbersList.querySelector('.dragging');
        if (dragging && dragging !== this) {
          const allP = Array.from(numbersList.querySelectorAll('p'));
          const dragIndex = allP.indexOf(dragging);
          const dropIndex = allP.indexOf(this);
          if (dragIndex < dropIndex) {
            this.parentNode.insertBefore(dragging, this.nextSibling);
          } else {
            this.parentNode.insertBefore(dragging, this);
          }
        }
      });
      
      p.addEventListener('dragover', function(e) {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
      });
      
      p.addEventListener('mouseenter', function() {
        this.style.cursor = 'pointer';
      });
      
      p.addEventListener('mouseleave', function() {
        this.style.cursor = 'default';
      });
      
      p.addEventListener('click', function() {
        alert('you click on paragraph ' + this.dataset.index);
      });
      
      numbersList.appendChild(p);
    });
    
    // Popup click inside
    popup.addEventListener('click', function(e) {
      e.stopPropagation();
      this.style.background = 'green';
      status.style.fontWeight = 'bold';
    });
    
    // Click outside
    document.addEventListener('click', function() {
      popup.style.background = 'blue';
      status.style.fontWeight = 'normal';
    });
    
    // Button click
    button.addEventListener('click', function(e) {
      e.stopPropagation();
      this.style.borderColor = 'black';
      this.style.fontWeight = 'bold';
      alert('you click on me ' + counter + ' times');
      counter += 2;
    });
  })();
</script>

